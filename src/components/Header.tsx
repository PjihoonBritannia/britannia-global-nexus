
import { useState, useEffect } from "react";
import { Link, useLocation } from "react-router-dom";
import { Menu, X } from "lucide-react";
import { Button } from "@/components/ui/button";

const Header = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isScrolled, setIsScrolled] = useState(false);
  const location = useLocation();

  const toggleMenu = () => {
    setIsMenuOpen(!isMenuOpen);
  };

  // Handle scroll effect
  useEffect(() => {
    const handleScroll = () => {
      if (window.scrollY > 20) {
        setIsScrolled(true);
      } else {
        setIsScrolled(false);
      }
    };

    window.addEventListener("scroll", handleScroll);
    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  // Close menu when route changes
  useEffect(() => {
    setIsMenuOpen(false);
  }, [location]);

  // Modified logo with better sizing
  const BritanniaLogo = () => (
    <svg xmlns="http://www.w3.org/2000/svg" width="140" height="40" viewBox="0 0 2573 686">
      <defs>
        <clipPath id="clip-logo">
          <rect width="2573" height="686"/>
        </clipPath>
      </defs>
      <g id="logo" clip-path="url(#clip-logo)">
        <circle id="circle" cx="335.5" cy="335.5" r="335.5" transform="translate(11 4)" fill="#ff0062"/>
        <path id="text" d="M58.295-167.836h116c70.289,0,111.686-37.947,111.686-96.162,0-35.791-19.836-63.389-54.334-74.6,26.736-11.212,42.259-34.929,42.259-66.839,0-52.178-38.81-85.813-101.336-85.813H58.295Zm55.627-189.305V-445.11h54.334c31.048,0,48.728,19.4,48.728,43.984,0,26.736-18.542,43.984-50.884,43.984Zm0,143.165v-98.749h58.215c38.378,0,56.49,19.4,56.49,47.865,0,27.6-19.836,50.884-56.921,50.884Zm209.141,46.14h52.178V-291.6c0-30.617,13.368-53.471,41.4-53.471,30.185,0,33.635,24.148,34.066,24.148H488.22v-29.323c-3.881-21.992-21.561-39.241-53.9-39.241-29.754,0-49.59,14.661-60.371,33.635l-3.019-28.46H323.063Zm186.287,0h52.178V-384.308H509.35Zm-1.725-261.319h55.627v-53.04H507.625ZM702.536-162.661c37.947,0,56.058-18.111,64.252-34.066v-28.892H730.565c0,2.156-2.587,18.974-25.873,18.974-22.423,0-30.617-14.23-30.617-39.241v-94.868h85.381v-43.553H674.076v-54.334H626.21l-3.019,54.334h-35.36v43.553H621.9v98.318C621.9-191.553,649.927-162.661,702.536-162.661Zm144.889,0c34.929,0,55.2-18.542,65.977-34.929l4.743,29.754h44.847V-300.651c0-58.646-31.91-88.831-93.143-88.831-62.527,0-82.363,38.81-82.363,38.81v28.46h37.085S835.783-345.5,868.555-345.5c29.323,0,41.828,14.661,41.828,43.553V-290.3a203.752,203.752,0,0,0-45.278-5.175c-62.958,0-90.125,27.167-90.125,65.545C774.981-192.846,799.129-162.661,847.425-162.661Zm12.937-41.4c-21.561,0-33.635-8.624-33.635-28.46,0-14.661,9.056-28.46,40.1-28.46,25.442,0,43.553,5.175,43.553,5.175v10.349C910.384-227.344,892.7-204.058,860.362-204.058Zm147.908,36.222h52.178V-292.889c0-24.579,12.074-51.315,49.159-51.315,31.048,0,43.122,21.13,43.122,51.315v125.053h52.609V-299.358c0-49.159-21.561-90.125-80.207-90.125-34.929,0-55.627,18.542-65.977,34.066l-3.018-28.892H1008.27Zm242.345,0h52.177V-292.889c0-24.579,12.074-51.315,49.159-51.315,31.048,0,43.122,21.13,43.122,51.315v125.053h52.609V-299.358c0-49.159-21.561-90.125-80.207-90.125-34.929,0-55.627,18.542-65.976,34.066l-3.019-28.892h-47.865Zm242.345,0h52.177V-384.308H1492.96Zm-1.725-261.319h55.627v-53.04h-55.627Zm158.689,266.493c34.929,0,55.2-18.542,65.976-34.929l4.744,29.754h44.847V-300.651c0-58.646-31.91-88.831-93.143-88.831-62.526,0-82.363,38.81-82.363,38.81v28.46h37.085s11.212-23.286,43.984-23.286c29.323,0,41.828,14.661,41.828,43.553V-290.3a203.747,203.747,0,0,0-45.278-5.175c-62.958,0-90.125,27.167-90.125,65.545C1577.479-192.846,1601.628-162.661,1649.924-162.661Zm12.937-41.4c-21.561,0-33.635-8.624-33.635-28.46,0-14.661,9.056-28.46,40.1-28.46,25.442,0,43.553,5.175,43.553,5.175v10.349C1712.882-227.344,1695.2-204.058,1662.861-204.058Z" transform="translate(793.343 654.456)" stroke="#000" stroke-width="0.2"/>
        <g id="symbol" transform="translate(-141 -156)">
          <path id="path1" d="M3091.98-7448.243a87.475,87.475,0,0,1-32.912-6.364,87.7,87.7,0,0,1-14.475-7.486,88.015,88.015,0,0,1-12.735-9.938,87.878,87.878,0,0,1-10.68-12.078,87.12,87.12,0,0,1-8.311-13.9,86.394,86.394,0,0,1-5.627-15.417,86.744,86.744,0,0,1-2.628-16.617,96.934,96.934,0,0,0,13.425.937,96.734,96.734,0,0,0,18.348-1.758,96.067,96.067,0,0,0,17.8-5.275,95.55,95.55,0,0,0,16.708-8.792,96.754,96.754,0,0,0,15.07-12.31c2.092-2.092,4.106-4.3,5.988-6.557,1.885,2.264,3.9,4.47,5.986,6.557a96.721,96.721,0,0,0,15.069,12.31,95.61,95.61,0,0,0,16.709,8.793,96.023,96.023,0,0,0,17.8,5.275,96.723,96.723,0,0,0,18.348,1.759,96.916,96.916,0,0,0,13.483-.946,86.683,86.683,0,0,1-2.627,16.619,86.344,86.344,0,0,1-5.626,15.418,87.11,87.11,0,0,1-8.31,13.9,87.891,87.891,0,0,1-10.68,12.079,88.1,88.1,0,0,1-12.735,9.939,87.729,87.729,0,0,1-14.476,7.487A87.474,87.474,0,0,1,3091.98-7448.243Zm168.938-163h0a96.759,96.759,0,0,0,.68-21.882,96.354,96.354,0,0,0-4.295-21.549,95.548,95.548,0,0,0-9.27-20.3,96.472,96.472,0,0,0-14.244-18.125c-2.1-2.1-4.306-4.114-6.557-5.987,2.261-1.881,4.468-3.895,6.559-5.986A96.513,96.513,0,0,0,3247.916-7723a95.551,95.551,0,0,0,9.25-20.066,96.344,96.344,0,0,0,4.375-21.311,96.752,96.752,0,0,0-.5-21.665,86.724,86.724,0,0,1,16.7,2.555,86.339,86.339,0,0,1,15.5,5.582,87.078,87.078,0,0,1,13.983,8.291,87.888,87.888,0,0,1,12.15,10.683,88.03,88.03,0,0,1,10,12.756,87.676,87.676,0,0,1,7.534,14.512,87.468,87.468,0,0,1,6.407,33.019,87.451,87.451,0,0,1-6.418,33.044,87.7,87.7,0,0,1-7.547,14.521,88,88,0,0,1-10.017,12.761,87.917,87.917,0,0,1-12.169,10.683,87.122,87.122,0,0,1-14,8.286,86.344,86.344,0,0,1-15.522,5.57,86.787,86.787,0,0,1-16.722,2.535Zm-337.941-.059h0a85.94,85.94,0,0,1-31.889-8.355,87.136,87.136,0,0,1-13.835-8.327,87.926,87.926,0,0,1-12.016-10.678,88.065,88.065,0,0,1-9.885-12.716,87.7,87.7,0,0,1-7.445-14.443,87.461,87.461,0,0,1-6.328-32.82,87.485,87.485,0,0,1,6.317-32.794,87.646,87.646,0,0,1,7.433-14.435,88.053,88.053,0,0,1,9.869-12.711,87.889,87.889,0,0,1,12-10.678,87.187,87.187,0,0,1,13.814-8.333,85.94,85.94,0,0,1,31.846-8.385,96.736,96.736,0,0,0-.488,21.65,96.3,96.3,0,0,0,4.381,21.294,95.53,95.53,0,0,0,9.25,20.049,96.525,96.525,0,0,0,14.117,17.915c2.083,2.083,4.289,4.1,6.557,5.986-2.259,1.881-4.465,3.9-6.557,5.987a96.514,96.514,0,0,0-14.237,18.112,95.517,95.517,0,0,0-9.269,20.28,96.316,96.316,0,0,0-4.3,21.533,96.737,96.737,0,0,0,.669,21.868Zm168.976-223.062h0c-1.88-2.259-3.894-4.465-5.987-6.556a96.77,96.77,0,0,0-15.069-12.311,95.544,95.544,0,0,0-16.707-8.793,96.052,96.052,0,0,0-17.8-5.276,96.785,96.785,0,0,0-18.346-1.759,96.939,96.939,0,0,0-13.433.938,86.744,86.744,0,0,1,2.619-16.628,86.342,86.342,0,0,1,5.621-15.427,87.127,87.127,0,0,1,8.308-13.914,87.93,87.93,0,0,1,10.68-12.086,88.079,88.079,0,0,1,12.738-9.946,87.652,87.652,0,0,1,14.479-7.492,87.469,87.469,0,0,1,32.926-6.37,87.466,87.466,0,0,1,32.928,6.371,87.609,87.609,0,0,1,14.48,7.493,87.987,87.987,0,0,1,12.738,9.948,87.866,87.866,0,0,1,10.68,12.087,87.145,87.145,0,0,1,8.308,13.915,86.4,86.4,0,0,1,5.62,15.428,86.761,86.761,0,0,1,2.617,16.629,96.97,96.97,0,0,0-13.487-.946,96.778,96.778,0,0,0-18.348,1.758,96.029,96.029,0,0,0-17.8,5.276,95.522,95.522,0,0,0-16.708,8.792,96.708,96.708,0,0,0-15.069,12.311c-2.088,2.086-4.1,4.292-5.985,6.556Z" transform="translate(-2615.862 8194.7)" fill="#fff"/>
          <path id="path2" d="M3191.649-7596.144h-.019c-4.779,0-21.1-.129-30.532-1.793a167.835,167.835,0,0,1-35.219-10.451,199.15,199.15,0,0,1-34.808-18.855,221.651,221.651,0,0,1-32.612-26.964,221.819,221.819,0,0,1-26.964-32.612,199.323,199.323,0,0,1-18.854-34.805,174.984,174.984,0,0,1-7.475-21.855,46.464,46.464,0,0,0,15.938-4.191,46.757,46.757,0,0,0,13.166-9.15,46.779,46.779,0,0,0,9.32-13.036,46.415,46.415,0,0,0,4.4-15.851,175.448,175.448,0,0,1,21.385,7.347,199.332,199.332,0,0,1,34.805,18.853,221.87,221.87,0,0,1,32.612,26.966,221.781,221.781,0,0,1,26.966,32.612,199.37,199.37,0,0,1,18.853,34.805,167.84,167.84,0,0,1,10.451,35.223c.584,3.313,1.347,9.674,1.662,21.162.19,6.929.119,12.525.1,12.563C3194.81-7596.164,3193.591-7596.144,3191.649-7596.144Zm-382.458,0c-2.052,0-3.146-.021-3.161-.03-.019-.04-.094-5.456.1-12.563.175-6.348.6-15.173,1.66-21.164a168.073,168.073,0,0,1,10.45-35.222,199.378,199.378,0,0,1,18.854-34.807,222.06,222.06,0,0,1,26.964-32.612,221.968,221.968,0,0,1,32.612-26.964,199.5,199.5,0,0,1,34.807-18.855,174.68,174.68,0,0,1,23.271-7.847,46.447,46.447,0,0,0,4.1,15.617,46.773,46.773,0,0,0,8.87,12.967,46.809,46.809,0,0,0,12.632,9.31,46.4,46.4,0,0,0,15.387,4.646,174.915,174.915,0,0,1-7.527,22.045,199.28,199.28,0,0,1-18.854,34.805A221.782,221.782,0,0,1,2942.4-7654.2a221.611,221.611,0,0,1-32.612,26.962,199.184,199.184,0,0,1-34.805,18.855,168.015,168.015,0,0,1-35.223,10.452C2830.336-7596.273,2813.98-7596.144,2809.191-7596.144Zm145.639-198.773h0a174.368,174.368,0,0,1-23.349-7.869,199.409,199.409,0,0,1-34.807-18.853,222.054,222.054,0,0,1-32.612-26.964,221.933,221.933,0,0,1-26.964-32.612,199.557,199.557,0,0,1-18.854-34.805,168.113,168.113,0,0,1-10.45-35.224c-.583-3.307-1.345-9.663-1.66-21.164-.2-7.11-.12-12.524-.1-12.562.019-.012,1.234-.032,3.163-.032,4.786,0,21.136.129,30.564,1.8a167.8,167.8,0,0,1,35.221,10.451,199.339,199.339,0,0,1,34.805,18.851,221.877,221.877,0,0,1,32.612,26.965,221.886,221.886,0,0,1,26.966,32.613,199.274,199.274,0,0,1,18.853,34.807,174.615,174.615,0,0,1,7.75,22.893,46.432,46.432,0,0,0-15.282,4.509,46.812,46.812,0,0,0-12.6,9.107,46.8,46.8,0,0,0-8.944,12.727,46.415,46.415,0,0,0-4.306,15.366Zm93.073-.495h0a46.407,46.407,0,0,0-4.609-15.6,46.794,46.794,0,0,0-9.393-12.794,46.76,46.76,0,0,0-13.134-8.946,46.452,46.452,0,0,0-15.831-4.054,174.778,174.778,0,0,1,7.7-22.714,199.387,199.387,0,0,1,18.854-34.805,221.557,221.557,0,0,1,26.964-32.612,221.709,221.709,0,0,1,32.612-26.966,199.279,199.279,0,0,1,34.808-18.853,167.719,167.719,0,0,1,35.219-10.451c9.436-1.664,25.8-1.793,30.586-1.793,2.033,0,3.125.02,3.14.03.02.036.1,5.432-.1,12.563-.174,6.35-.6,15.176-1.664,21.166a167.794,167.794,0,0,1-10.451,35.222,199.287,199.287,0,0,1-18.852,34.807,222.135,222.135,0,0,1-26.964,32.612,221.933,221.933,0,0,1-32.612,26.964,199.367,199.367,0,0,1-34.805,18.851,175.335,175.335,0,0,1-21.472,7.374Z" transform="translate(-2524.339 8286.188)" fill="#fff"/>
        </g>
      </g>
    </svg>
  );

  return (
    <header className={`fixed w-full z-50 transition-all duration-300 ${
      isScrolled ? 'bg-white/90 backdrop-blur-md shadow-md py-4' : 'bg-transparent py-6'
    }`}>
      <div className="container mx-auto px-6 flex items-center justify-between">
        <Link 
          to="/" 
          className={`flex items-center transition-transform duration-300 ${
            isScrolled ? 'scale-90' : ''
          }`}
        >
          <BritanniaLogo />
          <span className="sr-only">Britannia Inc.</span>
        </Link>

        {/* Desktop Navigation */}
        <nav className="hidden md:flex items-center space-x-12">
          <Link 
            to="/about" 
            className={`font-light hover:text-point link-underline transition-colors duration-200 ${
              location.pathname === '/about' ? 'text-point' : 'text-base-dark'
            }`}
          >
            About
          </Link>
          <Link 
            to="/uk-property" 
            className={`font-light hover:text-point link-underline transition-colors duration-200 ${
              location.pathname === '/uk-property' ? 'text-point' : 'text-base-dark'
            }`}
          >
            UK Property
          </Link>
          <Link 
            to="/media" 
            className={`font-light hover:text-point link-underline transition-colors duration-200 ${
              location.pathname === '/media' ? 'text-point' : 'text-base-dark'
            }`}
          >
            Media
          </Link>
          <Link 
            to="/esg" 
            className={`font-light hover:text-point link-underline transition-colors duration-200 ${
              location.pathname === '/esg' ? 'text-point' : 'text-base-dark'
            }`}
          >
            ESG
          </Link>
          <Link 
            to="/careers" 
            className={`font-light hover:text-point link-underline transition-colors duration-200 ${
              location.pathname === '/careers' ? 'text-point' : 'text-base-dark'
            }`}
          >
            Careers
          </Link>
          <Button 
            className="bg-point hover:bg-point/90 text-white rounded-[35px] hover:shadow-lg transition-shadow duration-300"
          >
            Contact Us
          </Button>
        </nav>

        {/* Mobile Menu Button */}
        <button
          className="md:hidden p-2 text-base-dark"
          onClick={toggleMenu}
          aria-label="Toggle menu"
        >
          {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
        </button>
      </div>

      {/* Mobile Navigation */}
      {isMenuOpen && (
        <div className="md:hidden absolute w-full bg-white/95 backdrop-blur-md z-50 border-t border-gray-100">
          <nav className="container mx-auto px-6 py-5 flex flex-col space-y-6">
            <Link 
              to="/about" 
              className={`font-light hover:text-point p-2 transition-all duration-200 ${
                location.pathname === '/about' ? 'text-point translate-x-2' : 'text-base-dark'
              }`}
              onClick={() => setIsMenuOpen(false)}
            >
              About
            </Link>
            <Link 
              to="/uk-property" 
              className={`font-light hover:text-point p-2 transition-all duration-200 ${
                location.pathname === '/uk-property' ? 'text-point translate-x-2' : 'text-base-dark'
              }`}
              onClick={() => setIsMenuOpen(false)}
            >
              UK Property
            </Link>
            <Link 
              to="/media" 
              className={`font-light hover:text-point p-2 transition-all duration-200 ${
                location.pathname === '/media' ? 'text-point translate-x-2' : 'text-base-dark'
              }`}
              onClick={() => setIsMenuOpen(false)}
            >
              Media
            </Link>
            <Link 
              to="/esg" 
              className={`font-light hover:text-point p-2 transition-all duration-200 ${
                location.pathname === '/esg' ? 'text-point translate-x-2' : 'text-base-dark'
              }`}
              onClick={() => setIsMenuOpen(false)}
            >
              ESG
            </Link>
            <Link 
              to="/careers" 
              className={`font-light hover:text-point p-2 transition-all duration-200 ${
                location.pathname === '/careers' ? 'text-point translate-x-2' : 'text-base-dark'
              }`}
              onClick={() => setIsMenuOpen(false)}
            >
              Careers
            </Link>
            <Button 
              className="bg-point hover:bg-point/90 text-white w-full rounded-[35px] hover:shadow-lg transition-all duration-300"
              onClick={() => setIsMenuOpen(false)}
            >
              Contact Us
            </Button>
          </nav>
        </div>
      )}
    </header>
  );
};

export default Header;
